Grips Setup for Gazebo Simulation

GAZEBO 5 (for Ros Indigo and Ubuntu 14.04)
1) add osrf gazebo sources to apt
sudo gedit /etc/apt/sources.list.d/ros-latest.list 
add "deb http://packages.osrfoundation.org/gazebo/ubuntu trusty main"
sudo apt-get update
2) sudo apt-get remove ros-indigo-gazebo-ros
3) sudo apt-get install ros-indigo-gazebo5-ros 
4) sudo apt-get install ros-indigo-gazebo5-plugins 


RCLL Simulation Package 
1) clone the code 
https://github.com/robocup-logistics/gazebo-rcll
2) compile the code
3) setup the environment variables (e.g. .bashrc)
add the lines:
export GAZEBO_RCLL=~/rcll/gazebo-rcll
export GAZEBO_PLUGIN_PATH=$GAZEBO_PLUGIN_PATH:$GAZEBO_RCLL/plugins/lib/gazebo:/usr/lib/x86_64-linux-gnu/gazebo-5.3/plugins:YOUR_CATKIN_WS/devel/lib/
export GAZEBO_MODEL_PATH=$GAZEBO_RCLL/models:YOR_CATKIN_WS/src/simulation/grips_simulation/models


RCLL Refbox
https://trac.fawkesrobotics.org/wiki/LLSFRefBox/Install
follow the install instruction
sudo apt-get install libncurses5-dev
make


Start everything:
1) start the llsf-refbox
2) start the llsf-refbox-shell
3) set the game to setup state
4) roslaunch grips_launch llsf.launch
5) rosrun team_server team_server
6) ~/catkin_ws/src/grips_launch/launch/sim_robot1c.sh


Test the Simulation
1) start a roscore
2) start the llsf-refbox
3) start the llsf-refbox-shell
4) set the game to setup state
5) start the simulation
rosrun gazebo_ros gazebo ~/catkin_ws/src/simulation/grips_simulation/worlds/llsf.world
you should see a play field with 12 machines after a while
add manuallly a model of the "grips-robotino"


Play with the simulation
0) set the referee box to simulation in yaml file (needed to see machine state in gazebo)
1) report a machine
./bin/llsf-report-machine Carologistics C-RS2 @e#6Aac6 Z13
2) set a delivery station port
./rcll-prepare-machine cargologistics C-DS 1
3) set a cap station to retriev cap
./rcll-prepare-machine cargologistics C-CS1 RETRIEVE_CAP


Mapping in the Simulation
1) start the joy pad controller
roslaunch grips_launch sim_teleop.launch
2) start gmapping
rosrun gmapping slam_gmapping scan:=/grips1/scan _map_frame:=/grips1/map _base_frame:=/grips1/base_robot_link  _odom_frame:=/grips1/odom


